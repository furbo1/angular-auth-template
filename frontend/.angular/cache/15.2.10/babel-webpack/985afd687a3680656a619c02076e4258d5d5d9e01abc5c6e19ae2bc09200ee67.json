{"ast":null,"code":"import { environment } from '../../../environments/environment'; // Adjust the path as necessary\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"@angular/forms\";\nexport class RegisterComponent {\n  constructor(http, router) {\n    this.http = http;\n    this.router = router;\n    this.email = '';\n    this.password = '';\n    this.confirmPassword = '';\n  }\n  handleSubmit() {\n    if (this.password !== this.confirmPassword) {\n      alert(\"Passwords don't match!\");\n      return;\n    }\n    // Use the BACKEND_URL from your environment configuration\n    const BACKEND_URL = environment.BACKEND_URL;\n    this.http.post(`${BACKEND_URL}/register`, {\n      username: this.email,\n      password: this.password\n    }, {\n      observe: 'response'\n    }).subscribe({\n      next: response => {\n        // Assuming the backend sends back the hashed password to store in local storage\n        // Check if the response body exists and contains the hashedPassword\n        if (response.body) {\n          localStorage.setItem('user', JSON.stringify({\n            username: this.email,\n            password: response.body.hashedPassword\n          }));\n          alert('Registration successful');\n          this.router.navigate(['/']); // Navigate to home or other page upon successful registration\n        } else {\n          alert('Registration failed');\n        }\n      },\n      error: error => {\n        console.error('Registration error:', error);\n        alert('An error occurred during registration.');\n      }\n    });\n  }\n  static #_ = this.ɵfac = function RegisterComponent_Factory(t) {\n    return new (t || RegisterComponent)(i0.ɵɵdirectiveInject(i1.HttpClient), i0.ɵɵdirectiveInject(i2.Router));\n  };\n  static #_2 = this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: RegisterComponent,\n    selectors: [[\"app-register\"]],\n    decls: 32,\n    vars: 3,\n    consts: [[1, \"flex\", \"min-h-full\", \"flex-col\", \"justify-center\", \"px-6\", \"py-12\", \"lg:px-8\"], [1, \"sm:mx-auto\", \"sm:w-full\", \"sm:max-w-sm\"], [\"src\", \"https://tailwindui.com/img/logos/mark.svg?color=indigo&shade=600\", \"alt\", \"Your Company\", 1, \"mx-auto\", \"h-10\", \"w-auto\"], [1, \"mt-10\", \"text-center\", \"text-2xl\", \"font-bold\", \"leading-9\", \"tracking-tight\", \"text-gray-900\"], [1, \"mt-10\", \"sm:mx-auto\", \"sm:w-full\", \"sm:max-w-sm\"], [1, \"space-y-6\", 3, \"ngSubmit\"], [\"for\", \"email\", 1, \"block\", \"text-sm\", \"font-medium\", \"leading-6\", \"text-gray-900\"], [1, \"mt-2\"], [\"id\", \"email\", \"name\", \"email\", \"type\", \"email\", \"autocomplete\", \"email\", \"required\", \"\", 1, \"block\", \"w-full\", \"rounded-md\", \"border-0\", \"py-1.5\", \"text-gray-900\", \"shadow-sm\", \"ring-1\", \"ring-inset\", \"ring-gray-300\", \"placeholder:text-gray-400\", \"focus:ring-2\", \"focus:ring-inset\", \"focus:ring-indigo-600\", \"sm:text-sm\", \"sm:leading-6\", 3, \"ngModel\", \"ngModelChange\"], [\"emailModel\", \"ngModel\"], [\"for\", \"password\", 1, \"block\", \"text-sm\", \"font-medium\", \"leading-6\", \"text-gray-900\"], [\"id\", \"password\", \"name\", \"password\", \"type\", \"password\", \"autocomplete\", \"new-password\", \"required\", \"\", 1, \"block\", \"w-full\", \"rounded-md\", \"border-0\", \"py-1.5\", \"text-gray-900\", \"shadow-sm\", \"ring-1\", \"ring-inset\", \"ring-gray-300\", \"placeholder:text-gray-400\", \"focus:ring-2\", \"focus:ring-inset\", \"focus:ring-indigo-600\", \"sm:text-sm\", \"sm:leading-6\", 3, \"ngModel\", \"ngModelChange\"], [\"passwordModel\", \"ngModel\"], [\"for\", \"confirm-password\", 1, \"block\", \"text-sm\", \"font-medium\", \"leading-6\", \"text-gray-900\"], [\"id\", \"confirm-password\", \"name\", \"confirmPassword\", \"type\", \"password\", \"autocomplete\", \"new-password\", \"required\", \"\", 1, \"block\", \"w-full\", \"rounded-md\", \"border-0\", \"py-1.5\", \"text-gray-900\", \"shadow-sm\", \"ring-1\", \"ring-inset\", \"ring-gray-300\", \"placeholder:text-gray-400\", \"focus:ring-2\", \"focus:ring-inset\", \"focus:ring-indigo-600\", \"sm:text-sm\", \"sm:leading-6\", 3, \"ngModel\", \"ngModelChange\"], [\"confirmPasswordModel\", \"ngModel\"], [\"type\", \"submit\", 1, \"flex\", \"w-full\", \"justify-center\", \"rounded-md\", \"bg-indigo-600\", \"px-3\", \"py-1.5\", \"text-sm\", \"font-semibold\", \"leading-6\", \"text-white\", \"shadow-sm\", \"hover:bg-indigo-500\", \"focus-visible:outline\", \"focus-visible:outline-2\", \"focus-visible:outline-offset-2\", \"focus-visible:outline-indigo-600\"], [1, \"mt-10\", \"text-center\", \"text-sm\", \"text-gray-500\"], [\"href\", \"/\", 1, \"font-semibold\", \"leading-6\", \"text-indigo-600\", \"hover:text-indigo-500\"]],\n    template: function RegisterComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelementStart(0, \"div\", 0)(1, \"div\", 1);\n        i0.ɵɵelement(2, \"img\", 2);\n        i0.ɵɵelementStart(3, \"h2\", 3);\n        i0.ɵɵtext(4, \"Register here:\");\n        i0.ɵɵelementEnd()();\n        i0.ɵɵelementStart(5, \"div\", 4)(6, \"form\", 5);\n        i0.ɵɵlistener(\"ngSubmit\", function RegisterComponent_Template_form_ngSubmit_6_listener() {\n          return ctx.handleSubmit();\n        });\n        i0.ɵɵelementStart(7, \"div\")(8, \"label\", 6);\n        i0.ɵɵtext(9, \"Email address\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(10, \"div\", 7)(11, \"input\", 8, 9);\n        i0.ɵɵlistener(\"ngModelChange\", function RegisterComponent_Template_input_ngModelChange_11_listener($event) {\n          return ctx.email = $event;\n        });\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(13, \"div\")(14, \"label\", 10);\n        i0.ɵɵtext(15, \"Password\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(16, \"div\", 7)(17, \"input\", 11, 12);\n        i0.ɵɵlistener(\"ngModelChange\", function RegisterComponent_Template_input_ngModelChange_17_listener($event) {\n          return ctx.password = $event;\n        });\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(19, \"div\")(20, \"label\", 13);\n        i0.ɵɵtext(21, \"Confirm Password\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(22, \"div\", 7)(23, \"input\", 14, 15);\n        i0.ɵɵlistener(\"ngModelChange\", function RegisterComponent_Template_input_ngModelChange_23_listener($event) {\n          return ctx.confirmPassword = $event;\n        });\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(25, \"div\")(26, \"button\", 16);\n        i0.ɵɵtext(27, \"Register\");\n        i0.ɵɵelementEnd()()();\n        i0.ɵɵelementStart(28, \"p\", 17);\n        i0.ɵɵtext(29, \" Not a member? \");\n        i0.ɵɵelementStart(30, \"a\", 18);\n        i0.ɵɵtext(31, \"Start a 14 day free trial\");\n        i0.ɵɵelementEnd()()()();\n      }\n      if (rf & 2) {\n        i0.ɵɵadvance(11);\n        i0.ɵɵproperty(\"ngModel\", ctx.email);\n        i0.ɵɵadvance(6);\n        i0.ɵɵproperty(\"ngModel\", ctx.password);\n        i0.ɵɵadvance(6);\n        i0.ɵɵproperty(\"ngModel\", ctx.confirmPassword);\n      }\n    },\n    dependencies: [i3.ɵNgNoValidate, i3.DefaultValueAccessor, i3.NgControlStatus, i3.NgControlStatusGroup, i3.RequiredValidator, i3.NgModel, i3.NgForm],\n    styles: [\"\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsInNvdXJjZVJvb3QiOiIifQ== */\"]\n  });\n}","map":{"version":3,"mappings":"AAGA,SAASA,WAAW,QAAQ,mCAAmC,CAAC,CAAC;;;;;AAYjE,OAAM,MAAOC,iBAAiB;EAK5BC,YAAoBC,IAAgB,EAAUC,MAAc;IAAxC,SAAI,GAAJD,IAAI;IAAsB,WAAM,GAANC,MAAM;IAJpD,UAAK,GAAW,EAAE;IAClB,aAAQ,GAAW,EAAE;IACrB,oBAAe,GAAW,EAAE;EAEmC;EAE/DC,YAAY;IACV,IAAI,IAAI,CAACC,QAAQ,KAAK,IAAI,CAACC,eAAe,EAAE;MAC1CC,KAAK,CAAC,wBAAwB,CAAC;MAC/B;;IAGF;IACA,MAAMC,WAAW,GAAGT,WAAW,CAACS,WAAW;IAE3C,IAAI,CAACN,IAAI,CAACO,IAAI,CAAuB,GAAGD,WAAW,WAAW,EAAE;MAC9DE,QAAQ,EAAE,IAAI,CAACC,KAAK;MACpBN,QAAQ,EAAE,IAAI,CAACA;KAChB,EAAE;MAAEO,OAAO,EAAE;IAAU,CAAE,CAAC,CACxBC,SAAS,CAAC;MACTC,IAAI,EAAGC,QAAQ,IAAI;QACjB;QACA;QACA,IAAIA,QAAQ,CAACC,IAAI,EAAE;UACjBC,YAAY,CAACC,OAAO,CAAC,MAAM,EAAEC,IAAI,CAACC,SAAS,CAAC;YAAEV,QAAQ,EAAE,IAAI,CAACC,KAAK;YAAEN,QAAQ,EAAEU,QAAQ,CAACC,IAAI,CAACK;UAAc,CAAE,CAAC,CAAC;UAC9Gd,KAAK,CAAC,yBAAyB,CAAC;UAChC,IAAI,CAACJ,MAAM,CAACmB,QAAQ,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC;SAC9B,MAAM;UACLf,KAAK,CAAC,qBAAqB,CAAC;;MAEhC,CAAC;MACDgB,KAAK,EAAGA,KAAK,IAAI;QACfC,OAAO,CAACD,KAAK,CAAC,qBAAqB,EAAEA,KAAK,CAAC;QAC3ChB,KAAK,CAAC,wCAAwC,CAAC;MACjD;KACD,CAAC;EACN;EAAC;qBArCUP,iBAAiB;EAAA;EAAA;UAAjBA,iBAAiB;IAAAyB;IAAAC;IAAAC;IAAAC;IAAAC;MAAA;QCf9BC,8BAAwE;QAEpEA,yBAA4H;QAC5HA,6BAAwF;QAAAA,8BAAc;QAAAA,iBAAK;QAE7GA,8BAAoD;QAC1BA;UAAA,OAAYC,kBAAc;QAAA,EAAC;QACjDD,2BAAK;QAC0EA,6BAAa;QAAAA,iBAAQ;QAClGA,+BAAkB;QAGTA;UAAA;QAAA,EAAmB;QAF1BA,iBAEiD;QAGrDA,4BAAK;QAC6EA,yBAAQ;QAAAA,iBAAQ;QAChGA,+BAAkB;QAGTA;UAAA;QAAA,EAAsB;QAF7BA,iBAEuD;QAG3DA,4BAAK;QACqFA,iCAAgB;QAAAA,iBAAQ;QAChHA,+BAAkB;QAGTA;UAAA;QAAA,EAA6B;QAFpCA,iBAEqE;QAGzEA,4BAAK;QACkRA,yBAAQ;QAAAA,iBAAS;QAG1SA,8BAAmD;QACjDA,gCACA;QAAAA,8BAAkF;QAAAA,0CAAyB;QAAAA,iBAAI;;;QAzBpGA,gBAAmB;QAAnBA,mCAAmB;QAQnBA,eAAsB;QAAtBA,sCAAsB;QAQtBA,eAA6B;QAA7BA,6CAA6B","names":["environment","RegisterComponent","constructor","http","router","handleSubmit","password","confirmPassword","alert","BACKEND_URL","post","username","email","observe","subscribe","next","response","body","localStorage","setItem","JSON","stringify","hashedPassword","navigate","error","console","selectors","decls","vars","consts","template","i0","ctx"],"sourceRoot":"","sources":["/Users/alex/Documents/Code/create-angular-auth/frontend/src/app/components/register/register.component.ts","/Users/alex/Documents/Code/create-angular-auth/frontend/src/app/components/register/register.component.html"],"sourcesContent":["import { Component } from '@angular/core';\nimport { HttpClient, HttpResponse } from '@angular/common/http';\nimport { Router } from '@angular/router';\nimport { environment } from '../../../environments/environment'; // Adjust the path as necessary\n\ninterface RegistrationResponse {\n  // Define the expected structure of your backend response here\n  hashedPassword: string;\n}\n\n@Component({\n  selector: 'app-register',\n  templateUrl: './register.component.html',\n  styleUrls: ['./register.component.css']\n})\nexport class RegisterComponent {\n  email: string = '';\n  password: string = '';\n  confirmPassword: string = '';\n\n  constructor(private http: HttpClient, private router: Router) {}\n\n  handleSubmit() {\n    if (this.password !== this.confirmPassword) {\n      alert(\"Passwords don't match!\");\n      return;\n    }\n\n    // Use the BACKEND_URL from your environment configuration\n    const BACKEND_URL = environment.BACKEND_URL;\n\n    this.http.post<RegistrationResponse>(`${BACKEND_URL}/register`, {\n      username: this.email,\n      password: this.password\n    }, { observe: 'response' })\n      .subscribe({\n        next: (response) => {\n          // Assuming the backend sends back the hashed password to store in local storage\n          // Check if the response body exists and contains the hashedPassword\n          if (response.body) {\n            localStorage.setItem('user', JSON.stringify({ username: this.email, password: response.body.hashedPassword }));\n            alert('Registration successful');\n            this.router.navigate(['/']); // Navigate to home or other page upon successful registration\n          } else {\n            alert('Registration failed');\n          }\n        },\n        error: (error) => {\n          console.error('Registration error:', error);\n          alert('An error occurred during registration.');\n        }\n      });\n  }\n}\n","<div class=\"flex min-h-full flex-col justify-center px-6 py-12 lg:px-8\">\n  <div class=\"sm:mx-auto sm:w-full sm:max-w-sm\">\n    <img class=\"mx-auto h-10 w-auto\" src=\"https://tailwindui.com/img/logos/mark.svg?color=indigo&shade=600\" alt=\"Your Company\"/>\n    <h2 class=\"mt-10 text-center text-2xl font-bold leading-9 tracking-tight text-gray-900\">Register here:</h2>\n  </div>\n  <div class=\"mt-10 sm:mx-auto sm:w-full sm:max-w-sm\">\n    <form class=\"space-y-6\" (ngSubmit)=\"handleSubmit()\">\n      <div>\n        <label for=\"email\" class=\"block text-sm font-medium leading-6 text-gray-900\">Email address</label>\n        <div class=\"mt-2\">\n          <input id=\"email\" name=\"email\" type=\"email\" autocomplete=\"email\" required\n                 class=\"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6\"\n                 [(ngModel)]=\"email\" #emailModel=\"ngModel\">\n        </div>\n      </div>\n      <div>\n        <label for=\"password\" class=\"block text-sm font-medium leading-6 text-gray-900\">Password</label>\n        <div class=\"mt-2\">\n          <input id=\"password\" name=\"password\" type=\"password\" autocomplete=\"new-password\" required\n                 class=\"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6\"\n                 [(ngModel)]=\"password\" #passwordModel=\"ngModel\">\n        </div>\n      </div>\n      <div>\n        <label for=\"confirm-password\" class=\"block text-sm font-medium leading-6 text-gray-900\">Confirm Password</label>\n        <div class=\"mt-2\">\n          <input id=\"confirm-password\" name=\"confirmPassword\" type=\"password\" autocomplete=\"new-password\" required\n                 class=\"block w-full rounded-md border-0 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6\"\n                 [(ngModel)]=\"confirmPassword\" #confirmPasswordModel=\"ngModel\">\n        </div>\n      </div>\n      <div>\n        <button type=\"submit\" class=\"flex w-full justify-center rounded-md bg-indigo-600 px-3 py-1.5 text-sm font-semibold leading-6 text-white shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600\">Register</button>\n      </div>\n    </form>\n    <p class=\"mt-10 text-center text-sm text-gray-500\">\n      Not a member?\n      <a href=\"/\" class=\"font-semibold leading-6 text-indigo-600 hover:text-indigo-500\">Start a 14 day free trial</a>\n    </p>\n  </div>\n</div>\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}